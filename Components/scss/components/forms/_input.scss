@use '../../abstracts/tokens' as tokens;
@use 'sass:map';

/* =======================================
   ðŸ”¹ Mixin principal pentru input-uri
======================================= */
@mixin input-style($variant: default) {
  $colors: map.get(tokens.$input-colors, $variant);

  border: 1.5px solid map.get($colors, border);
  background-color: map.get($colors, background);
  color: map.get($colors, text);
  width: 100%;
  height: var(--spacing-48, 48px);
  padding: 0 var(--spacing-12, 12px);
  border-radius: var(--border-radius-8, 8px);
  font-size: var(--font-size-14, 14px);
  box-sizing: border-box;

  &::placeholder {
    color: map.get($colors, placeholder);
  }

  &:hover:not(:disabled) {
    border-color: map.get($colors, border-hover);
    box-shadow: 0 0 0 0.5px map.get($colors, border-hover);
  }

  &:focus:not(:disabled) {
    outline: none;
    box-shadow: 0 0 0 4px map.get($colors, focus);
  }

  &:disabled {
    background-color: map.get($colors, disabled-bg);
    border-color: map.get($colors, disabled-border);
    color: map.get($colors, disabled-text);
    cursor: not-allowed;
    pointer-events: none;
    opacity: 0.7;
  }

  &[readonly]:not(:disabled) {
    background-color: map.get($colors, readonly-bg);
    border-color: map.get($colors, readonly-border);
    color: map.get($colors, readonly-text);
    cursor: default;
    pointer-events: none;
    opacity: 1;

    &::placeholder {
      color: map.get($colors, readonly-text);
    }
  }
}

/* =======================================
   ðŸ”¹ Label pentru input
======================================= */
label {
  display: block;
  font-size: var(--text-body-sm-font-size, 14px);
  margin-bottom: var(--spacing-6, 6px);

  &.required::after {
    content: '*';
    margin-left: var(--spacing-4, 4px);
    color: var(--red-500);
  }
}

/* =======================================
   ðŸ”¹ Clasa de bazÄƒ
======================================= */
.input {
  @include input-style(default);
}

.input--warning {
  @include input-style(warning);
}

.input--destructive {
  @include input-style(destructive);
}

.input--success {
  @include input-style(success);
}

/* =======================================
   ðŸ”¹ State-uri adiÈ›ionale
======================================= */
.input--filled {
  background-color: var(--white);
  border-color: var(--gray-300);
  color: var(--gray-900);

  &::placeholder {
    color: transparent;
  }
}

.input:focus:not(:placeholder-shown) {
  border-color: var(--blue-sky-500);
}

.input:focus:placeholder-shown {
  border-color: var(--blue-sky-300);
}

/* =======================================
   ðŸ”¹ IconiÈ›e È™i wrapper
======================================= */
.input-wrapper {
  position: relative;
  display: flex;
  align-items: center;

  .input {
    text-overflow: ellipsis;
    width: 100%;
  }

  .input-icon--leading,
  .input-icon--trailing {
    position: absolute;
    display: flex;
    align-items: center;
    pointer-events: none;
    color: var(--gray-500);
  }

  .input-icon {
    position: absolute;
    top: 50%;
    transform: translateY(-50%);

    &.left { left: var(--spacing-8); }
    &.right { right: var(--spacing-8); }

    &.checkmark {
      color: var(--green-600);
    }
  }

  &:has(.left, .right) {
    .input {
      padding-inline: var(--spacing-32);
    }
  }
  .spinner {
    position: absolute;
    right: var(--spacing-12); 
  }
  &.has-leading .input { padding-left: var(--spacing-40, 40px); }
  &.has-trailing .input { padding-right: var(--spacing-40, 40px); }

  &.is-textarea {
    align-items: stretch;
    flex-direction: column;

    .input {
      height: auto;
      min-height: var(--spacing-80, 80px);
      padding-top: var(--spacing-8, 8px);
      padding-bottom: var(--spacing-8, 8px);
      resize: vertical;
    }
  }
}

.input-message {
  font-size: var(--text-body-sm-font-size, 14px);
  margin-top: var(--spacing-4, 4px);
  display: flex;
  align-items: center;
  gap: var(--spacing-4, 4px);

  &.default { color: var(--color-text-base-secondary); }
  &.warning { color: var(--color-text-warning-default); }
  &.destructive { color: var(--color-text-danger-default); }
  &.success { color: var(--color-text-positive-default); }

  .icon {
    font-size: 16px;
    line-height: 1;
  }
}
/* =======================================
   ðŸ”¹ Input cu iconiÈ›Äƒ de tip "clear"
======================================== */
.input--clear {
  padding-right: var(--spacing-40, 40px);

  .input-icon--trailing {
    right: var(--spacing-8, 8px);
  }
}