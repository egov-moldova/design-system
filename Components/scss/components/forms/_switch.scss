@use '../../abstracts/tokens' as tokens;

// =====================
// ðŸ”¹ Switch Component
// =====================
.switch {
  --track-width: var(--spacing-48, 48px);
  --track-height: var(--spacing-28, 28px);
  --thumb-size: var(--spacing-24, 24px);
  --track-radius: var(--radius-full, 9999px);
  --thumb-radius: var(--radius-full, 9999px);
  --transition: 0.25s ease;
  --track-bg: var(--gray-300, #b2b2b2);
  --track-bg-hover: var(--gray-400, #757575);
  --track-bg-checked: var(--blue-sky-600, #0058D2);
  --track-bg-disabled: var(--gray-200, #f1f1f1);
  --thumb-bg: var(--white, #fff);
  --thumb-bg-disabled: var(--white, #fff);
  --focus-ring: 0 0 0 3px var(--blue-sky-200, rgba(59, 130, 246, 0.4));
  --error-color: var(--red-600, #EF4444);
  --error-track: var(--red-600, #D92D20);
  --error-text: var(--red-700, #B91C1C);

  display: flex;
  flex-direction: column;
  gap: var(--spacing-4, 4px);

  // ===== Wrapper general =====
  &-wrapper {
    display: flex;
    align-items: center;
    gap: var(--spacing-8, 8px);
    cursor: pointer;
    position: relative;
    width: fit-content;
  }

  // ===== Input invizibil =====
  &-input {
    position: absolute;
    opacity: 0;
    pointer-events: none;
    height: 0;
    margin: 0;
    width: 0;
  }

  // ===== Track + thumb =====
  &-track {
    position: relative;
    width: var(--track-width);
    height: var(--track-height);
    background-color: var(--track-bg);
    border-radius: var(--track-radius);
    transition: background-color var(--transition), box-shadow var(--transition);
    flex-shrink: 0;
  }

  &-thumb {
    position: absolute;
    top: 50%;
    left: 2px;
    width: var(--thumb-size);
    height: var(--thumb-size);
    background-color: var(--thumb-bg);
    border-radius: var(--thumb-radius);
    transform: translate(0, -50%);
    transition: transform var(--transition), background-color var(--transition);
  }

  // ===== Hover =====
  &-wrapper:hover .switch-track {
    background-color: var(--track-bg-hover);
  }

  // ===== Checked =====
  &-input:checked + .switch-track {
    background-color: var(--track-bg-checked);
  }

  &-input:checked + .switch-track .switch-thumb {
    transform: translate(calc(var(--track-width) - var(--thumb-size) - 4px), -50%);
  }

  // ===== Focus =====
    .switch-input:focus + .switch-track {
        outline: 2px solid var(--blue-sky-500, #3379DD);
        outline-offset: 1px;
    }

    .switch-input:active + .switch-track {
        box-shadow: var(--focus-ring);
    }
  &-input:focus-visible + .switch-track {
    box-shadow: var(--focus-ring);
  }
  // ===== Disabled =====
  &--disabled {
    opacity: 0.6;
    cursor: not-allowed;

    .switch-input {
      pointer-events: none;
    }

    .switch-track {
      background-color: var(--track-bg-disabled);
    }

    .switch-thumb {
      background-color: var(--thumb-bg-disabled);
    }

    .switch-label {
      color: var(--gray-500, #6B7280);
    }

    .switch-description {
      color: var(--gray-400, #9CA3AF);
    }
  }

  // ===== Error =====
  &--error .switch-track {
    background-color: var(--error-track);
  }

  &--error .switch-label {
    color: var(--error-text);
  }

  // ===== Label + description =====
  &-text {
    display: flex;
    flex-direction: column;
    gap: var(--spacing-4, 4px);  
  }

  &-label {
    font-size: var(--text-body-md-500-font-size, 16px);
    color: var(--gray-700, #383838);
    line-height: 1.2;
    user-select: none;
  }

  &-description {
    font-size: var(--text-body-md-font-size, 16px);
    color: var(--gray-400, #757575);
    line-height: 1.2;
  }

  // ===== Size variants =====
  &--small {
    --track-width: var(--spacing-32, 32px);
    --track-height: var(--spacing-16, 16px);
    --thumb-size: var(--spacing-12, 12px);

    .switch-label {
      font-size: var(--text-caption-md-font-size, 12px);
    }

    .switch-description {
      font-size: var(--text-caption-sm-font-size, 10px);
    }
  }

  &--medium {
    --track-width: var(--spacing-40, 40px);
    --track-height: var(--spacing-24, 24px);
    --thumb-size: var(--spacing-16, 16px);
  }

  &--large {
    --track-width: var(--spacing-56, 56px);
    --track-height: var(--spacing-32, 32px);
    --thumb-size: var(--spacing-24, 24px);

    .switch-label {
      font-size: var(--text-body-md-font-size, 16px);
    }

    .switch-description {
      font-size: var(--text-body-md-font-size, 16px);
    }
  }
}